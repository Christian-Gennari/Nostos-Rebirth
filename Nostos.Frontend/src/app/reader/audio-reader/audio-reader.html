<div class="audio-container">
  <div class="cover-section">
    <div class="cover-art shadow-lg">
      @if (book()?.coverUrl) {
      <img [src]="book()?.coverUrl" alt="Book Cover" class="cover-img" />
      } @else {
      <div class="placeholder-art">
        <lucide-icon [img]="Icons.AudioLines" [size]="48" class="placeholder-icon"></lucide-icon>
      </div>
      }
    </div>

    <div class="track-info">
      <h2 class="book-title">{{ book()?.title }}</h2>
      <p class="book-author">{{ book()?.author }}</p>
    </div>
  </div>

  <div class="controls">
    <div class="scrubber">
      <input
        type="range"
        [min]="0"
        [max]="duration()"
        [value]="currentTime()"
        (input)="seek($event)"
        class="range-input"
      />
      <div class="time-labels">
        <span>{{ formatTime(currentTime()) }}</span>
        <span>{{ formatTime(duration()) }}</span>
      </div>
    </div>

    <div class="playback-row">
      <div class="main-controls">
        <button class="skip-btn" (click)="skip(-15)" title="Rewind 15s">
          <lucide-icon [img]="Icons.RotateCcw" [size]="24"></lucide-icon>
          <span class="skip-label">15</span>
        </button>

        <button class="play-btn" (click)="togglePlay()">
          @if(isPlaying()) {
          <lucide-icon [img]="Icons.Pause" [size]="32" class="icon-fill"></lucide-icon>
          } @else {
          <lucide-icon [img]="Icons.Play" [size]="32" class="icon-fill ml-1"></lucide-icon>
          }
        </button>

        <button class="skip-btn" (click)="skip(15)" title="Forward 15s">
          <lucide-icon [img]="Icons.RotateCw" [size]="24"></lucide-icon>
          <span class="skip-label">15</span>
        </button>
      </div>
    </div>

    <div class="rate-selector">
      <span class="rate-label">Speed</span>
      <div class="rate-options">
        @for (rate of availableRates; track rate) {
        <button class="rate-btn" [class.active]="currentRate() === rate" (click)="setRate(rate)">
          {{ rate }}x
        </button>
        }
      </div>
    </div>
  </div>
</div>
