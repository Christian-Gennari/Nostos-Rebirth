<main>
  <div class="container library-container">

    <div class="view-toggle">
      <button [class.active]="viewMode() === 'list'" (click)="viewMode.set('list')">List</button>
      <button [class.active]="viewMode() === 'grid'" (click)="viewMode.set('grid')">Grid</button>
    </div>

    <div class="add-book">
      <input type="text" placeholder="Title" [(ngModel)]="newBook.title" />

      <input type="text" placeholder="Author (optional)" [(ngModel)]="newBook.author" />

      <button (click)="addBook()">Add Book</button>
    </div>


    @if (editing()) {
    <div class="edit-form" style="margin-bottom: 2rem;">
      <h3>Edit Book</h3>

      <input type="text" placeholder="Title" [(ngModel)]="editTitle" />

      <input type="text" placeholder="Author" [(ngModel)]="editAuthor" />

      <button (click)="saveEdit()">Save</button>
      <button (click)="cancelEdit()">Cancel</button>
    </div>
    }

    <!-- LIST VIEW -->
    @if (viewMode() === 'list') {
    <div class="table-wrapper">

      <div class="table-header">
        <div class="col title">Title</div>
        <div class="col author">Author</div>
        <div class="col format">Format</div>
        <div class="col fav">Fav</div>
        <div class="col actions">Actions</div>
      </div>

      <div class="table-body">
        @for (book of books(); track book.id) {
        <div class="table-row" [routerLink]="['/library', book.id]">
          <div class="col title">{{ book.title }}</div>
          <div class="col author">{{ book.author }}</div>
          <div class="col format">
            <span class="tag">‚Äî</span>
          </div>
          <div class="col fav">
            <span class="star">‚òÖ</span>
          </div>
          <div class="col actions">
            <button class="icon-btn" (click)="startEdit(book); $event.stopPropagation()">‚úèÔ∏è</button>
            <button class="icon-btn" (click)="deleteBook(book.id, $event)">üóë</button>
          </div>
        </div>
        }
      </div>

    </div>
    }

    <!-- GRID VIEW -->
    @if (viewMode() === 'grid') {
    <div class="book-grid">
      @for (book of books(); track book.id) {
      <div class="book-card">
        <div class="cover"></div>
        <div class="book-title">{{ book.title }}</div>
        <div class="book-author">{{ book.author }}</div>
      </div>
      }
    </div>
    }

  </div>
</main>
